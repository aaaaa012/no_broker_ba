flowchart LR
  subgraph Client
    A[Browser - React/TS]
  end

  subgraph Backend[Express API]
    B1[/Auth/]:::api
    B2[/Users/]:::api
    B3[/Listings/]:::api
    B4[/Visits/]:::api
    B5[/Messages/]:::api
    B6[/Notifications/]:::api
    B7[/Favorites/]:::api
    B8[/Ratings/]:::api
    B9[/Recommendations/]:::api
    B10[/Agreements/]:::api
    B11[/Payments/]:::api
    B12[/Admin/]:::api
    B13[/Staff/]:::api
  end

  subgraph Realtime[Socket.IO]
    S1((WS))
  end

  subgraph Data[PostgreSQL]
    D[(DB Cluster)]
  end

  A -- REST --> Backend
  A -- WebSocket --> S1
  Backend -- Query/Pool --> D
  S1 -- Pub/Sub Events --> A
  S1 -- Persist via API --> Backend

  classDef api fill:#eef,stroke:#88f

